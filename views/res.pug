html(lang="en")
    head
        meta(charset="UTF-8")
        meta(name="viewport", content="width=device-width, initial-scale=1.0")
        title RESERVAS
        link(href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous")
        link(rel="stylesheet", href="/css/flatpickr.min.css")
        link(rel="stylesheet", href="/css/restyle.css")
    body
        header 
            form(action="/res", method="get") 
                select(name="mes") 
                    option(value="") seleccione un mes
                    option(value="1") Enero
                    option(value="2") Febrero
                    option(value="3") Marzo
                    option(value="4") Abril
                    option(value="5") Mayo
                    option(value="6") Junio
                    option(value="7") Julio
                    option(value="8") Agosto
                    option(value="9") Septiembre
                    option(value="10") Octubre
                    option(value="11") Noviembre
                    option(value="12") Diciembre
                select(name="dia") 
                    option(value="") seleccione dia
                    option(value="6") viernes 
                    option(value="7") sabado 
                    option(value="1") domingo
                input(type="text", name="query")
                button(type="submit") buscar
        main 
            form(action="/addres" method="post")
                label(for="#") fecha
                input(type="text", name="fecha_hora" id="calendario")
                label(for="#") Hora 
                input(type="time", name="hora")
                label(for="#") Identificacion 
                input(type="number", name="NID")
                label(for="#") nombre 
                input(type="text", name="nombre")
                label(for="#") correo 
                input(type="email", name="correo")
                label(for="#") celular 
                input(type="number", name="celular")
                label(for="#") tipo
                select(name="tipos")
                    if tipos && tipos.length 
                        each tipo in tipos 
                            option(value=tipo.tipo) #{tipo.nombre}
                    else 
                        option(value="") no se encontraron tipos
                label(for="#") cantidad_p
                input(type="number", name="cantidad_p")
                label(for="#") mesa 
                select(name="mesa_asig")
                    if mesas && mesas.length 
                        each mesa in mesas 
                            option(value=mesa.ID)  #{mesa.ID}
                    else 
                        option(value="") no se encontro mesa
                label(for="")  observacion 
                input(type="text", name="obser")
                button(type="submit") agregar
            section(name="mostres")
                if reservas && reservas.length 
                    each reserva in reservas
                        .card.mb-3(style="max-width: 540px")
                            .row.g-0
                                .col-md-4
                                img.img-fluid.rounded-start(src="/img/reserva.jpg" alt="...")
                                .col-md-8   
                                .card-body
                                    h5.card-title #{new Date(reserva.fecha_hora).toLocaleDateString("es-ES",{ year:"numeric",month:"long", day:"numeric"})}
                                    p.card-text #{reserva.nombre} 
                                        form(action=`/borrar/${reserva.id_re}`, method="post") 
                                            button(type="submit" class="btn btn-danger") Eliminar
                                        form(action=`/actualizar/${reserva.id_re}`, method="post")
                                            input(type="text", name="fecha_hora_act" id="calendario")
                                            label(for="#") Hora 
                                            input(type="time", name="hora_aCT")
                                            label(for="#") Identificacion 
                                            input(type="number", name="NID_act")
                                            label(for="#") nombre 
                                            input(type="text", name="nombre_act")
                                            label(for="#") correo 
                                            input(type="email", name="correo_act")
                                            label(for="#") celular 
                                            input(type="number", name="celular_act")
                                            label(for="#") tipo
                                            select(name="tipo_re")
                                                if tipos && tipos.length 
                                                    each tipo in tipos 
                                                        option(value=tipo.tipo) #{tipo.nombre}
                                                else 
                                                    option(value="") no se encontraron tipos
                                            label(for="#") cantidad_p
                                            input(type="number", name="cantidad_p_act")
                                            label(for="#") mesa 
                                            select(name="mesa_asig_act")
                                                if mesas && mesas.length 
                                                    each mesa in mesas 
                                                        option(value=mesa.ID)  #{mesa.ID}
                                                else 
                                                    option(value="") no se encontro mesa
                                            label(for="")  observacion 
                                            input(type="text", name="obser_act")
                                            button(type="submit") agregar 
                                        small.text-body-secondary Last updated 3 mins ago
                                        if fechareservada ===  hoy
                                            button(type="submit") ordenar 
                                            button(type="submit") Eliminar       
                    else                    
                        p no hay reservas

        footer 
            ul.nav.justify-content-center
                li.nav-item
                    a.nav-link(href="/ventas") Ventas
                li.nav-item
                    a.nav-link(href="/sesion") home
                li.nav-item
                    a.nav-link(href="/prod") Productos
                li.nav-item
                    a.nav-link(href="/res") Reservas
                li.nav-item 

        
        script(src="/js/flatpickr.min.js")
        script(src="/js/res.js", type="module")
                    