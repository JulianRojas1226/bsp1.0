
html(lang="en")
    head
        meta(charset="UTF-8")
        meta(name="viewport", content="width=device-width, initial-scale=1.0")
        title Ventas
        link(href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous")
        link(rel="stylesheet", href="/css/ventas.css")
        link(rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.2/css/all.min.css" integrity="sha512-Evv84Mr4kqVGRNSgIGL/F/aIDqQb7xQ2vcrdIwxfjThSH8CSR7PBEakCr51Ck+w+/U6swU2Im1vVX0SVk9ABhg==" crossorigin="anonymous" referrerpolicy="no-referrer")
    body 
        main 
            if mesas && mesas.length
                each mesa in mesas 
                    button(type="button" class="btn-mesa" data-id=`${mesa.ID}`) Mesa #{mesa.ID}
                    div(id=`modal-${mesa.ID}` class="modal")
                        div(class="modal-contenido")
                            span.cerrar &times; <!-- BotÃ³n para cerrar -->
                            h2 Mesa #{mesa.ID}
                            form(action=`/ingorden/${mesa.ID}`, method="post") 
                                select(name="producto") 
                                    if productos && productos.length 
                                        each producto in productos 
                                            option(value=producto.id)  #{producto.nombre}
                                    else 
                                        option(value="") no hay productos en stock 
                                label(for="#") cantidad
                                input(type="number", name="cantidad")
                                button(type="submit") agregar
                            div 
                                h1 Productos consumidos
                                table(border="1") 
                                    thead
                                        tr
                                        th Producto
                                        th Cantidad
                                        th Precio_u
                                        th total
                                        th editar
                                    if ordenes && ordenes.length 
                                        each orden in ordenes
                                            if mesa.ID === orden.mesa_id
                                                tbody
                                                    tr
                                                    td #{orden.producto}
                                                    td #{orden.cantidad}
                                                    td #{orden.precio_u}
                                                    td #{orden.total_p}
                                                    td 
                                                        form(action=`/eliminar/${orden.id}`, method="post")
                                                            button(type="submit" class="btn btn-danger") 
                                                                i.fa-regular.fa-trash-can

                                    else    
                                        p no se han consumido productos
                            div 
                                if totales && totales.length
                                    each total in totales
                                        if mesa.ID  === total.mesa_id
                                            div
                                                h3 Total para Mesa #{total.mesa_id}: $#{total.total_mesa}
                                else
                                    p No hay totales disponibles para las mesas.

        footer
            ul.nav.justify-content-center
                li.nav-item
                    a.nav-link(href="/sesion") Ventas
                li.nav-item
                    a.nav-link(href="/sesion") home
                li.nav-item
                    a.nav-link(href="/prod") Productos
                li.nav-item
                    a.nav-link(href="/res") Reservas
                li.nav-item 


    script(src="/js/ventas.js")



                    







