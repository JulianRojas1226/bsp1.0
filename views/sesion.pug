html(lang="en")
    head
        meta(charset="UTF-8")
        meta(name="viewport", content="width=device-width, initial-scale=1.0")
        title sesion
        link(rel="stylesheet", href="/css/stylesesion.css")
        link(href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous")
        script(src="https://cdn.jsdelivr.net/npm/echarts/dist/echarts.min.js")
        link(rel="stylesheet" href="https://cdn.jsdelivr.net/npm/fullcalendar@6.1.8/main.min.css")
        link(rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.2/css/all.min.css" integrity="sha512-Evv84Mr4kqVGRNSgIGL/F/aIDqQb7xQ2vcrdIwxfjThSH8CSR7PBEakCr51Ck+w+/U6swU2Im1vVX0SVk9ABhg==" crossorigin="anonymous" referrerpolicy="no-referrer")

    
    body
        nav.sidebar.close
            header
                .image-text
                    span.image
                        img(src="/img/BASSPROD3.png", alt="logo")
                .text.header-text
                    span.name #{usuario}
                    if cargo == 1
                        span.profecion Admin
                    else 
                        span.profecionn Empleado
                i.fa-solid.fa-greater-than.toggle
            .menu-bar
                .menu
                    ul.menu-links
                        li.nav-link
                            a(href="/sesion")
                                i.fa-solid.fa-house
                                span.text.nav-text Inicio
                        if cargo == 1
                            li.nav-link
                                a(href="/admin")
                                    i.fa-solid.fa-user-tie
                                    span.text.nav-text Admin
                        li.nav-link
                            a(href="/prod")
                                i.fa-solid.fa-beer-mug-empty
                                span.text.nav-text Productos
                        li.nav-link
                            a(href="/ventas")
                                i.fa-solid.fa-cart-shopping
                                span.text.nav-text Ventas
                        li.nav-link
                            a(href="/res")
                                i.fa-solid.fa-calendar
                                span.text.nav-text Reservas
                        

                .bottom-content
                    li
                        a(href="/logout")
                            i.fa-solid.fa-right-from-bracket
                            span.text.nav-text Logout
                    li.mode
                        .moon-sun
                            i.fa-regular.fa-moon.icon.moon
                            i.fa-solid.fa-sun.icon.sun
                        span.mode-text.text Dark Mode
                        .toggle-switch
                            span.switch
        .home
            
            main 
                .container-fluid
                    .row.d-flex.justify-content-between
                        .col-sm-2
                            .div.card.border-success.mb-3(style="max-width: 18rem;")
                                .card-header.bg-transparent.border-success Ventas Diarias
                                .card-body.text-success
                                    h5.card-title #{ventashoy[0].total}
                                    p.card-text $#{parseInt(ventashoy[0].total_pago).toLocaleString()}
                                
                        .col-sm-2
                            .div.card.border-success.mb-3(style="max-width: 18rem;")
                                .card-header.bg-transparent.border-success Ventas Mes
                                .card-body.text-success
                                    h5.card-title #{ventasmeses[0].total}
                                    p.card-text $#{parseInt(ventasmeses[0].total_pago).toLocaleString()}        
                        .col-sm-2
                            .div.card.border-success.mb-3(style="max-width: 18rem;")
                                .card-header.bg-transparent.border-success Promedio
                                .card-body.text-success
                                    h5.card-title $#{parseInt(promedio.promedio).toLocaleString()}
                                    p.card-text Ultimos 30 dias
                        .col-sm-2
                            .div.card.border-success.mb-3(style="max-width: 18rem;")
                                .card-header.bg-transparent.border-success Productos vendidos
                                .card-body.text-success
                                    h5.card-title #{parseInt(productosVendidos[0].total).toLocaleString() || '0'}
                                    p.card-text ultimos 30 dias
                        .col-xl-4.col-md-8.col-sm-12.mb-3
                            .alert.alert-stock.mb-0.h-100.d-flex.align-items-center#lowStockAlert
                                .flex-shrink-0.me-3
                                    i.fa-regular.fa-bell(style="font-size: 2rem;")
                                .flex-grow-1
                                    h6.alert-heading.mb-2
                                        i.fa-solid.fa-triangle-exclamation
                                        |  Productos con Stock Bajo
                                    #lowStockList
                                        if lowstocks && lowstocks.length 
                                            each lowstock in lowstocks
                                                span.badge.bg-danger.me-2.mb-1 #{lowstock.nombre} (#{lowstock.cantidad})
                                        else    
                                            p no hay productos con bajo stock
                    .row.d-flex
                        .col-lg-8.mb-4
                            .chart-container
                                .d-flex.justify-content-between.align-items-center.mb-3
                                    h5.mb-0
                                        i.bi.bi-graph-up.text-primary.me-2
                                        | Ventas Diarias
                                    small.text-muted Últimos 7 días
                                #ventasDiarias(style="height: 400px;")
                        .col-lg-4.mb-4
                            .chart-container
                                .d-flex.justify-content-between.align-items-center.mb-3
                                    h5.mb-0
                                        i.bi.bi-pie-chart.text-success.me-2
                                        | Por Categoría
                                    button#modoCategoriaBtn boton por categoria
                                    small.text-muted Últimos 30 días
                                #categoria(style="height: 400px;")
                    .row.justify-content-around
                        .col-lg-8.mb-4
                            .chart-container
                                .d-flex.justify-content-between.align-items-center.mb-3
                                    h5.mb-0
                                        i.bi.bi-bar-chart.text-info.me-2
                                        | Tendencia de Ventas
                                    small.text-muted Últimos 12 meses
                                #comparativoAnualChart(style="height: 400px;")

                        .col-lg-4.mb-4
                            #calendar

                                        

                            
            
        script(src="https://cdn.jsdelivr.net/npm/fullcalendar@6.1.8/index.global.min.js")
        script(src="/js/sesion.js",type="module")
    